<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera Database - Camera Manual Vault</title>
    <style>
        :root {
            --primary-color: #ff6b6b;
            --secondary-color: #4ecdc4;
            --dark-bg: #0a0a0a;
            --darker-bg: #050505;
            --card-bg: #1a1a1a;
            --card-hover: #252525;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --text-muted: #666666;
            --border-color: #333333;
            --success-color: #4CAF50;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Header */
        header {
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--text-primary);
            text-decoration: none;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        nav a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        nav a:hover,
        nav a.active {
            color: var(--text-primary);
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Page Header with Search */
        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #fff 0%, #ff6b6b 50%, #4ecdc4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        /* Advanced Search Container */
        .search-section {
            max-width: 800px;
            margin: 0 auto 3rem;
            position: relative;
        }

        .search-container {
            position: relative;
            background: var(--card-bg);
            border-radius: 15px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .search-container.focused {
            border-color: var(--primary-color);
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.2);
        }

        .search-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem;
        }

        .search-input-wrapper {
            flex: 1;
            position: relative;
        }

        .search-input {
            width: 100%;
            background: none;
            border: none;
            color: var(--text-primary);
            padding: 1rem 1.5rem;
            font-size: 1.1rem;
            outline: none;
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        /* Filter Toggle Button */
        .filter-toggle-btn {
            background: var(--darker-bg);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.75rem 1.25rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .filter-toggle-btn:hover {
            background: var(--card-hover);
            color: var(--text-primary);
        }

        .filter-toggle-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .filter-arrow {
            transition: transform 0.3s ease;
        }

        .filter-toggle-btn.active .filter-arrow {
            transform: rotate(180deg);
        }

        .search-btn {
            background: var(--gradient-1);
            border: none;
            color: white;
            padding: 1rem 2rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.3s ease;
        }

        .search-btn:hover {
            transform: scale(1.05);
        }

        /* Autofill Suggestions */
        .suggestions-container {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 15px 15px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }

        .suggestions-container.show {
            display: block;
        }

        .suggestion-category {
            padding: 0.75rem 1.5rem;
            background: var(--darker-bg);
            color: var(--text-muted);
            font-size: 0.85rem;
            font-weight: 500;
            border-bottom: 1px solid var(--border-color);
        }

        .suggestion-item {
            padding: 1rem 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: background 0.2s ease;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .suggestion-item:hover,
        .suggestion-item.highlighted {
            background: var(--card-hover);
        }

        .suggestion-icon {
            color: var(--text-muted);
            font-size: 1.2rem;
        }

        .suggestion-text {
            flex: 1;
        }

        .suggestion-main {
            color: var(--text-primary);
            font-weight: 500;
        }

        .suggestion-sub {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .suggestion-match {
            background: rgba(255, 107, 107, 0.2);
            color: var(--primary-color);
            padding: 0.1rem 0.2rem;
            border-radius: 3px;
        }

        /* Filter Dropdown */
        .filter-dropdown {
            display: none;
            background: var(--darker-bg);
            border-top: 1px solid var(--border-color);
            padding: 1.5rem;
            border-radius: 0 0 15px 15px;
        }

        .filter-dropdown.show {
            display: block;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
        }

        .filter-section {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .filter-section h4 {
            color: var(--secondary-color);
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-checkbox {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--text-secondary);
            transition: color 0.2s ease;
        }

        .filter-checkbox:hover {
            color: var(--text-primary);
        }

        .filter-checkbox input {
            appearance: none;
            width: 16px;
            height: 16px;
            background: var(--darker-bg);
            border: 2px solid var(--border-color);
            border-radius: 4px;
            margin-right: 0.5rem;
            cursor: pointer;
            position: relative;
        }

        .filter-checkbox input:checked {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .filter-checkbox input:checked::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 10px;
            font-weight: bold;
        }

        .active-filters {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .filter-tag {
            background: var(--primary-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-tag-remove {
            cursor: pointer;
            font-weight: bold;
        }

        /* Results Header */
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .results-count {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Camera List */
        .camera-list {
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .alphabet-section {
            margin-bottom: 0;
        }

        .alphabet-header {
            background: var(--darker-bg);
            padding: 1rem 1.5rem;
            font-size: 1.25rem;
            font-weight: bold;
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            position: sticky;
            top: 80px;
            z-index: 10;
        }

        .camera-items {
            padding: 0;
        }

        .camera-item {
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            transition: background 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            position: relative;
        }

        .camera-item:hover {
            background: var(--card-hover);
        }

        .camera-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .camera-name {
            font-weight: 500;
            color: var(--text-primary);
        }

        .camera-details {
            display: flex;
            gap: 1rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .camera-meta {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .camera-year {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .camera-price {
            color: var(--primary-color);
            font-weight: 500;
        }

        .manual-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--success-color);
            font-size: 0.85rem;
        }

        /* Show Tags Button */
        .show-tags-btn {
            background: var(--darker-bg);
            border: 1px solid var(--border-color);
            color: var(--text-muted);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 1rem;
        }

        .show-tags-btn:hover {
            background: var(--card-hover);
            color: var(--text-secondary);
        }

        /* Tags Popup */
        .tags-popup {
            position: absolute;
            top: 100%;
            right: 1.5rem;
            background: var(--darker-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1rem;
            margin-top: 0.5rem;
            z-index: 100;
            display: none;
            max-width: 400px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .camera-item.show-tags .tags-popup {
            display: block;
        }

        .tags-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tag-item {
            background: var(--card-bg);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.75rem;
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 4rem;
            color: var(--text-secondary);
            font-size: 1.2rem;
        }

        /* No Results */
        .no-results {
            text-align: center;
            padding: 4rem;
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        /* Alphabet Jump Links */
        .alphabet-jump {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 2rem;
            padding: 1rem;
            background: var(--card-bg);
            border-radius: 10px;
            border: 1px solid var(--border-color);
            justify-content: center;
        }

        .jump-link {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--darker-bg);
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .jump-link:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        .jump-link.active {
            background: var(--primary-color);
            color: white;
        }

        .jump-link.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* Footer */
        .footer {
            background: var(--darker-bg);
            padding: 3rem 2rem 2rem;
            text-align: center;
            border-top: 1px solid var(--border-color);
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--text-secondary);
        }

        .footer-disclaimer {
            color: var(--text-muted);
            font-size: 0.8rem;
            line-height: 1.5;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
        }

        .footer-disclaimer a {
            color: var(--text-muted);
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .filter-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }

            h1 {
                font-size: 2rem;
            }

            .search-header {
                flex-wrap: wrap;
            }

            .filter-grid {
                grid-template-columns: 1fr;
            }

            .camera-item {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .camera-meta {
                margin-top: 0.5rem;
            }

            .results-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .tags-popup {
                right: 1rem;
                left: 1rem;
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <a href="/" class="logo">
                <span>📸</span>
                <span>Camera Manual Vault</span>
            </a>
            <nav>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/cameras" class="active">Cameras</a></li>
                    <li><a href="/camera-finder">Camera Finder</a></li>
                    <li><a href="/productions">Productions</a></li>
                    <li><a href="/forum">Forum</a></li>
                    <li><a href="/search">Search</a></li>
                    <li><a href="/login">Login</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1>Camera Database</h1>
            <p class="page-subtitle">Browse our comprehensive collection of camera specifications and manuals</p>
        </div>

        <!-- Advanced Search Section -->
        <div class="search-section">
            <div class="search-container" id="searchContainer">
                <div class="search-header">
                    <div class="search-input-wrapper">
                        <input type="search" 
                               id="searchInput"
                               class="search-input" 
                               placeholder="Search cameras, brands, features..."
                               autocomplete="off">
                    </div>
                    <button class="filter-toggle-btn" id="filterToggle" onclick="toggleFilters()">
                        <span>Filters</span>
                        <span class="filter-arrow">▼</span>
                    </button>
                    <button class="search-btn" onclick="performSearch()">Search</button>
                </div>
                
                <!-- Autofill Suggestions -->
                <div class="suggestions-container" id="suggestionsContainer">
                    <!-- Suggestions will be populated here -->
                </div>
                
                <!-- Filter Dropdown -->
                <div class="filter-dropdown" id="filterDropdown">
                    <div class="filter-grid" id="filterGrid">
                        <!-- Filters will be dynamically generated -->
                    </div>
                    <div class="active-filters" id="activeFilters" style="display: none;">
                        <!-- Active filter tags will appear here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Alphabet Jump Links -->
        <div class="alphabet-jump" id="alphabetJump">
            <!-- Will be populated by JavaScript -->
        </div>

        <!-- Results Header -->
        <div class="results-header">
            <h2 class="results-count" id="resultsCount">Loading cameras...</h2>
        </div>
        
        <!-- Camera List -->
        <div class="camera-list" id="cameraList">
            <div class="loading">Loading camera database...</div>
        </div>
    </main>

    <!-- Footer with Legal -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="/privacy">Privacy Policy</a>
                <a href="/terms">Terms of Service</a>
                <a href="/dmca">DMCA Policy</a>
                <a href="/attribution">Image Attributions</a>
                <a href="/contact">Contact</a>
            </div>
            <div class="footer-disclaimer">
                <p>© 2025 Camera Manual Vault. Educational Use Only. All camera images are property of their respective manufacturers and are used for educational purposes under fair use doctrine.</p>
                <p>Product names, logos, brands, and other trademarks featured or referred to within Camera Manual Vault are the property of their respective trademark holders. These trademark holders are not affiliated with Camera Manual Vault.</p>
                <p><a href="/legal">Full Legal Disclaimer</a> | <a href="/attribution">View All Image Attributions</a></p>
            </div>
        </div>
    </footer>

    <script>
        // Comprehensive Auto-Tagging System
        class UniversalTagger {
            constructor() {
                this.tagRules = {
                    // Camera-specific tags
                    camera: {
                        sensorSize: ['full-frame', 'aps-c', 'micro-four-thirds', 'm43', 'mft', 'medium-format', '1-inch', 'super35', 'large-format'],
                        videoCapability: ['4k', '6k', '8k', '12k', 'hd', 'full-hd', '1080p', '720p', 'raw-video', 'prores', 'braw', 'cinema4k', 'dci4k'],
                        features: ['ibis', 'ois', 'stabilization', 'weather-sealed', 'weatherproof', 'wifi', 'bluetooth', 'gps', 'touchscreen', 'flip-screen', 'evf', 'viewfinder', 'dual-card', 'cfast', 'cfexpress'],
                        mount: ['ef-mount', 'rf-mount', 'e-mount', 'l-mount', 'z-mount', 'x-mount', 'mft-mount', 'm43-mount', 'pl-mount'],
                        purpose: ['professional', 'prosumer', 'consumer', 'beginner', 'enthusiast', 'cinema', 'broadcast', 'documentary', 'wedding', 'sports', 'wildlife', 'portrait', 'landscape', 'street', 'travel', 'vlog', 'content-creation', 'hybrid', 'studio'],
                        canonSeries: ['eos', 'eos-r', 'eos-m', 'powershot', 'cinema-eos', 'c-series', '5d', '6d', '7d', '1d', 'rebel', 'kiss'],
                        sonySeries: ['alpha', 'a7', 'a9', 'a1', 'a6000', 'fx', 'fs', 'venice', 'rx', 'zv'],
                        nikonSeries: ['z-series', 'd-series', 'd850', 'd780', 'd500', 'coolpix', 'z9', 'z8', 'z7', 'z6', 'z5', 'zf', 'zfc'],
                        fujifilmSeries: ['x-series', 'gfx', 'x-t', 'x-pro', 'x-e', 'x-s', 'x-h', 'instax'],
                        technology: ['mirrorless', 'dslr', 'rangefinder', 'compact', 'bridge', 'action-cam', 'instant', 'film', 'digital', 'analog', 'autofocus', 'phase-detect', 'contrast-detect', 'dual-pixel', 'ai-autofocus', 'eye-af', 'animal-af'],
                        priceRange: ['budget', 'entry-level', 'mid-range', 'high-end', 'premium', 'luxury', 'affordable', 'expensive'],
                        era: ['vintage', 'classic', 'retro', 'modern', 'latest', 'new', 'discontinued', 'current', 'legacy', 'film-era', 'digital-era'],
                        performance: ['fast', 'high-speed', 'low-light', 'high-iso', 'high-resolution', 'high-megapixel', 'burst-mode', 'continuous-shooting', 'slow-motion', 'high-fps'],
                        formFactor: ['compact', 'lightweight', 'portable', 'heavy', 'large', 'small', 'pocketable', 'professional-body', 'battery-grip']
                    }
                };
            }
            
            generateTags(item, type = 'camera') {
                const tags = new Set();
                const text = this.normalizeText(item);
                
                // Add basic tags
                if (item.brand) tags.add(item.brand.toLowerCase());
                if (item.model) tags.add(item.model.toLowerCase().replace(/\s+/g, '-'));
                if (item.category) tags.add(item.category.toLowerCase());
                
                // Year-based tags
                if (item.releaseYear) {
                    tags.add(`year-${item.releaseYear}`);
                    tags.add(this.getEraTags(item.releaseYear));
                    tags.add(`${Math.floor(item.releaseYear / 10) * 10}s`);
                }
                
                // Price-based tags
                if (item.price) {
                    tags.add(this.getPriceRangeTags(item.price));
                    tags.add(`under-${Math.ceil(item.price / 1000) * 1000}`);
                }
                
                // Feature detection
                if (item.specs || item.features || item.description) {
                    const specsText = JSON.stringify(item.specs || {}) + ' ' + 
                                     JSON.stringify(item.features || []) + ' ' + 
                                     (item.description || '');
                    
                    Object.values(this.tagRules.camera).flat().forEach(tag => {
                        if (this.containsTag(specsText, tag)) {
                            tags.add(tag);
                        }
                    });
                }
                
                // Model-specific tags
                this.addModelSpecificTags(item, tags);
                
                // Manual availability
                if (item.manualUrl) {
                    tags.add('manual-available');
                    tags.add('documented');
                }
                
                // Add compound tags
                this.addCompoundTags(item, tags);
                
                // Add search variations
                this.addSearchVariations(item, tags);
                
                return Array.from(tags);
            }
            
            normalizeText(item) {
                return JSON.stringify(item).toLowerCase().replace(/[^a-z0-9\s]/g, ' ');
            }
            
            containsTag(text, tag) {
                const normalized = text.toLowerCase();
                const tagVariations = [
                    tag,
                    tag.replace(/-/g, ' '),
                    tag.replace(/-/g, ''),
                    tag.split('-').join('')
                ];
                
                return tagVariations.some(variation => 
                    normalized.includes(variation.toLowerCase())
                );
            }
            
            getEraTags(year) {
                if (year >= 2025) return 'latest';
                if (year >= 2020) return 'current';
                if (year >= 2015) return 'modern';
                if (year >= 2010) return 'recent';
                if (year >= 2000) return 'classic';
                return 'vintage';
            }
            
            getPriceRangeTags(price) {
                if (price < 500) return 'budget';
                if (price < 1000) return 'entry-level';
                if (price < 2000) return 'enthusiast';
                if (price < 3500) return 'prosumer';
                if (price < 5000) return 'professional';
                if (price < 10000) return 'high-end';
                if (price < 25000) return 'premium';
                return 'luxury';
            }
            
            addModelSpecificTags(item, tags) {
                const model = (item.model || '').toUpperCase();
                
                const megapixels = parseInt(model.match(/(\d+)MP/)?.[1] || 
                                          item.specs?.megapixels?.match(/(\d+)/)?.[1] || 0);
                if (megapixels) {
                    tags.add(`${megapixels}mp`);
                    if (megapixels >= 100) tags.add('ultra-high-resolution');
                    else if (megapixels >= 50) tags.add('high-resolution');
                    else if (megapixels >= 24) tags.add('standard-resolution');
                    else if (megapixels < 24) tags.add('low-resolution');
                }
                
                const markMatch = model.match(/MARK\s*([IVX]+|\d+)/i);
                if (markMatch) {
                    tags.add('mark-series');
                    tags.add(`mark-${markMatch[1].toLowerCase()}`);
                }
                
                const genMatch = model.match(/([IVX]+|\d+)$/);
                if (genMatch) {
                    tags.add(`generation-${genMatch[1].toLowerCase()}`);
                }
            }
            
            addCompoundTags(item, tags) {
                if (tags.has('cinema') || tags.has('broadcast')) {
                    tags.add('video-production');
                    tags.add('professional-video');
                }
                
                if (tags.has('entry-level') && tags.has('budget')) {
                    tags.add('beginner-friendly');
                    tags.add('first-camera');
                }
                
                if (tags.has('compact') && (tags.has('lightweight') || tags.has('portable'))) {
                    tags.add('travel-camera');
                }
                
                if (tags.has('flip-screen') && tags.has('4k')) {
                    tags.add('content-creator');
                    tags.add('youtube-ready');
                }
            }
            
            addSearchVariations(item, tags) {
                if (item.brand) {
                    const brand = item.brand.toLowerCase();
                    const variations = {
                        'canon': ['cannon'],
                        'fujifilm': ['fuji', 'fujinon'],
                        'hasselblad': ['hasselblad', 'hassel'],
                        'panasonic': ['lumix'],
                        'olympus': ['oly']
                    };
                    
                    if (variations[brand]) {
                        variations[brand].forEach(v => tags.add(v));
                    }
                }
                
                if (item.model) {
                    const romanMap = {
                        'ii': '2', 'iii': '3', 'iv': '4', 'v': '5',
                        'vi': '6', 'vii': '7', 'viii': '8', 'ix': '9'
                    };
                    
                    Object.entries(romanMap).forEach(([roman, num]) => {
                        if (item.model.toLowerCase().includes(roman)) {
                            tags.add(item.model.toLowerCase().replace(roman, num));
                        }
                        if (item.model.includes(num)) {
                            tags.add(item.model.toLowerCase().replace(num, roman));
                        }
                    });
                }
            }
        }
        
        // Main application
        const tagger = new UniversalTagger();
        let allCameras = [];
        let filteredCameras = [];
        let activeFilters = {};
        let searchQuery = '';
        let filterStructure = {};
        let suggestionsVisible = false;
        let highlightedSuggestion = -1;
        
        // Load cameras on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadCameras();
            setupEventListeners();
        });
        
        async function loadCameras() {
            try {
                const response = await fetch('/api/cameras?limit=1000');
                const data = await response.json();
                
                // Generate comprehensive tags for all cameras
                allCameras = data.cameras.map(camera => ({
                    ...camera,
                    tags: tagger.generateTags(camera, 'camera')
                }));
                
                // Sort alphabetically
                allCameras.sort((a, b) => a.fullName.localeCompare(b.fullName));
                
                // Build dynamic filter structure
                buildDynamicFilters();
                
                // Apply initial filters
                applyFilters();
                
                // Generate alphabet jumps
                generateAlphabetJumps();
                
            } catch (error) {
                console.error('Error loading cameras:', error);
                document.getElementById('cameraList').innerHTML = 
                    '<div class="error">Error loading cameras. Please try again.</div>';
            }
        }
        
        function buildDynamicFilters() {
            filterStructure = {
                category: {},
                brand: {},
                priceRange: {},
                features: {},
                video: {}
            };
            
            allCameras.forEach(camera => {
                if (camera.category) {
                    filterStructure.category[camera.category] = 
                        (filterStructure.category[camera.category] || 0) + 1;
                }
                
                filterStructure.brand[camera.brand] = 
                    (filterStructure.brand[camera.brand] || 0) + 1;
                
                camera.tags.forEach(tag => {
                    if (['budget', 'entry-level', 'enthusiast', 'prosumer', 'professional', 'high-end', 'premium', 'luxury'].includes(tag)) {
                        filterStructure.priceRange[tag] = (filterStructure.priceRange[tag] || 0) + 1;
                    }
                    
                    if (['ibis', 'weather-sealed', 'wifi', 'touchscreen', 'flip-screen', 'dual-card'].includes(tag)) {
                        filterStructure.features[tag] = (filterStructure.features[tag] || 0) + 1;
                    }
                    
                    if (['4k', '6k', '8k', 'raw-video'].includes(tag)) {
                        filterStructure.video[tag] = (filterStructure.video[tag] || 0) + 1;
                    }
                });
            });
            
            renderFilters();
        }
        
        function renderFilters() {
            const container = document.getElementById('filterGrid');
            let html = '';
            
            const filterGroups = [
                { title: 'Category', key: 'category', data: filterStructure.category },
                { title: 'Brand', key: 'brand', data: Object.entries(filterStructure.brand)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 10)
                    .reduce((obj, [k, v]) => ({ ...obj, [k]: v }), {}) },
                { title: 'Price', key: 'priceRange', data: filterStructure.priceRange },
                { title: 'Video', key: 'video', data: filterStructure.video },
                { title: 'Features', key: 'features', data: filterStructure.features }
            ];
            
            filterGroups.forEach(group => {
                const items = Object.entries(group.data).filter(([_, count]) => count > 0);
                if (items.length > 0) {
                    html += `
                        <div class="filter-section">
                            <h4>${group.title}</h4>
                            ${items.map(([value, count]) => `
                                <label class="filter-checkbox">
                                    <input type="checkbox" name="${group.key}" value="${value}" onchange="updateFilters()">
                                    <span>${formatFilterLabel(value)} (${count})</span>
                                </label>
                            `).join('')}
                        </div>
                    `;
                }
            });
            
            container.innerHTML = html;
        }
        
        function formatFilterLabel(value) {
            return value.split('-').map(word => 
                word.charAt(0).toUpperCase() + word.slice(1)
            ).join(' ');
        }
        
        function setupEventListeners() {
            const searchInput = document.getElementById('searchInput');
            const searchContainer = document.getElementById('searchContainer');
            
            // Focus/blur events
            searchInput.addEventListener('focus', () => {
                searchContainer.classList.add('focused');
                if (searchInput.value.length > 0) {
                    showSuggestions();
                }
            });
            
            searchInput.addEventListener('blur', () => {
                searchContainer.classList.remove('focused');
                setTimeout(() => hideSuggestions(), 200);
            });
            
            // Input event for real-time search and suggestions
            searchInput.addEventListener('input', (e) => {
                searchQuery = e.target.value.toLowerCase();
                updateSuggestions();
                applyFilters();
            });
            
            // Keyboard navigation
            searchInput.addEventListener('keydown', (e) => {
                if (!suggestionsVisible) return;
                
                const suggestions = document.querySelectorAll('.suggestion-item');
                
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    highlightedSuggestion = Math.min(highlightedSuggestion + 1, suggestions.length - 1);
                    updateSuggestionHighlight();
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    highlightedSuggestion = Math.max(highlightedSuggestion - 1, -1);
                    updateSuggestionHighlight();
                } else if (e.key === 'Enter' && highlightedSuggestion >= 0) {
                    e.preventDefault();
                    suggestions[highlightedSuggestion].click();
                } else if (e.key === 'Escape') {
                    hideSuggestions();
                }
            });
            
            // Click outside to close
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.search-container')) {
                    hideSuggestions();
                    document.getElementById('filterDropdown').classList.remove('show');
                    document.getElementById('filterToggle').classList.remove('active');
                }
                
                if (!e.target.closest('.show-tags-btn') && !e.target.closest('.tags-popup')) {
                    document.querySelectorAll('.camera-item').forEach(item => {
                        item.classList.remove('show-tags');
                    });
                }
            });
        }
        
        function updateSuggestions() {
            const query = searchQuery.trim();
            
            if (query.length === 0) {
                hideSuggestions();
                return;
            }
            
            const suggestions = generateSuggestions(query);
            renderSuggestions(suggestions);
            showSuggestions();
        }
        
        function generateSuggestions(query) {
            const suggestions = [];
            const seen = new Set();
            
            // Camera matches
            const cameraMatches = allCameras
                .filter(camera => {
                    const searchText = `${camera.fullName} ${camera.brand} ${camera.model}`.toLowerCase();
                    return searchText.includes(query);
                })
                .slice(0, 5);
            
            if (cameraMatches.length > 0) {
                suggestions.push({ type: 'category', label: 'Cameras' });
                cameraMatches.forEach(camera => {
                    suggestions.push({
                        type: 'camera',
                        icon: '📷',
                        main: camera.fullName,
                        sub: `${camera.category || 'Camera'} • ${camera.releaseYear || 'N/A'}`,
                        action: () => window.location.href = `/camera/${camera.id}`
                    });
                });
            }
            
            // Brand suggestions
            const brandMatches = Object.keys(filterStructure.brand)
                .filter(brand => brand.toLowerCase().includes(query))
                .slice(0, 3);
            
            if (brandMatches.length > 0) {
                suggestions.push({ type: 'category', label: 'Brands' });
                brandMatches.forEach(brand => {
                    suggestions.push({
                        type: 'brand',
                        icon: '🏢',
                        main: brand,
                        sub: `${filterStructure.brand[brand]} cameras`,
                        action: () => {
                            searchQuery = brand.toLowerCase();
                            document.getElementById('searchInput').value = brand;
                            applyFilters();
                            hideSuggestions();
                        }
                    });
                });
            }
            
            // Feature suggestions
            const featureMatches = [];
            Object.values(tagger.tagRules.camera).flat().forEach(tag => {
                if (tag.includes(query) && !seen.has(tag)) {
                    seen.add(tag);
                    featureMatches.push(tag);
                }
            });
            
            if (featureMatches.length > 0) {
                suggestions.push({ type: 'category', label: 'Features' });
                featureMatches.slice(0, 3).forEach(feature => {
                    suggestions.push({
                        type: 'feature',
                        icon: '⚡',
                        main: formatFilterLabel(feature),
                        sub: 'Feature',
                        action: () => {
                            searchQuery = feature;
                            document.getElementById('searchInput').value = feature;
                            applyFilters();
                            hideSuggestions();
                        }
                    });
                });
            }
            
            return suggestions;
        }
        
        function renderSuggestions(suggestions) {
            const container = document.getElementById('suggestionsContainer');
            
            if (suggestions.length === 0) {
                container.innerHTML = '';
                return;
            }
            
            let html = '';
            suggestions.forEach((item, index) => {
                if (item.type === 'category') {
                    html += `<div class="suggestion-category">${item.label}</div>`;
                } else {
                    html += `
                        <div class="suggestion-item" data-index="${index}" 
                             onmouseover="highlightedSuggestion=${index};updateSuggestionHighlight()"
                             onclick="executeSuggestion(${index})">
                            <span class="suggestion-icon">${item.icon}</span>
                            <div class="suggestion-text">
                                <div class="suggestion-main">${highlightMatch(item.main, searchQuery)}</div>
                                <div class="suggestion-sub">${item.sub}</div>
                            </div>
                        </div>
                    `;
                }
            });
            
            container.innerHTML = html;
            window.currentSuggestions = suggestions;
        }
        
        function highlightMatch(text, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span class="suggestion-match">$1</span>');
        }
        
        function executeSuggestion(index) {
            const suggestion = window.currentSuggestions[index];
            if (suggestion && suggestion.action) {
                suggestion.action();
            }
        }
        
        function updateSuggestionHighlight() {
            document.querySelectorAll('.suggestion-item').forEach((item, index) => {
                item.classList.toggle('highlighted', index === highlightedSuggestion);
            });
        }
        
        function showSuggestions() {
            document.getElementById('suggestionsContainer').classList.add('show');
            suggestionsVisible = true;
            highlightedSuggestion = -1;
        }
        
        function hideSuggestions() {
            document.getElementById('suggestionsContainer').classList.remove('show');
            suggestionsVisible = false;
            highlightedSuggestion = -1;
        }
        
        function toggleFilters() {
            const dropdown = document.getElementById('filterDropdown');
            const toggle = document.getElementById('filterToggle');
            
            dropdown.classList.toggle('show');
            toggle.classList.toggle('active');
        }
        
        function updateFilters() {
            activeFilters = {};
            
            document.querySelectorAll('.filter-checkbox input:checked').forEach(checkbox => {
                const filterType = checkbox.name;
                const value = checkbox.value;
                
                if (!activeFilters[filterType]) {
                    activeFilters[filterType] = new Set();
                }
                activeFilters[filterType].add(value);
            });
            
            renderActiveFilters();
            applyFilters();
        }
        
        function renderActiveFilters() {
            const container = document.getElementById('activeFilters');
            const hasFilters = Object.values(activeFilters).some(set => set.size > 0);
            
            if (!hasFilters) {
                container.style.display = 'none';
                return;
            }
            
            container.style.display = 'flex';
            let html = '';
            
            Object.entries(activeFilters).forEach(([type, values]) => {
                values.forEach(value => {
                    html += `
                        <span class="filter-tag">
                            ${formatFilterLabel(value)}
                            <span class="filter-tag-remove" onclick="removeFilter('${type}', '${value}')">×</span>
                        </span>
                    `;
                });
            });
            
            html += '<span class="filter-tag" style="background: transparent; border: 1px solid var(--border-color);" onclick="clearAllFilters()">Clear all ×</span>';
            
            container.innerHTML = html;
        }
        
        function removeFilter(type, value) {
            if (activeFilters[type]) {
                activeFilters[type].delete(value);
                if (activeFilters[type].size === 0) {
                    delete activeFilters[type];
                }
            }
            
            document.querySelector(`input[name="${type}"][value="${value}"]`).checked = false;
            renderActiveFilters();
            applyFilters();
        }
        
        function clearAllFilters() {
            activeFilters = {};
            document.querySelectorAll('.filter-checkbox input').forEach(checkbox => {
                checkbox.checked = false;
            });
            renderActiveFilters();
            applyFilters();
        }
        
        function generateAlphabetJumps() {
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ#'.split('');
            const jumpContainer = document.getElementById('alphabetJump');
            
            const availableLetters = new Set();
            filteredCameras.forEach(camera => {
                const firstLetter = camera.fullName[0].toUpperCase();
                availableLetters.add(/[A-Z]/.test(firstLetter) ? firstLetter : '#');
            });
            
            jumpContainer.innerHTML = alphabet.map(letter => 
                `<a href="#section-${letter}" 
                    class="jump-link ${!availableLetters.has(letter) ? 'disabled' : ''}" 
                    onclick="${availableLetters.has(letter) ? `jumpToLetter('${letter}')` : 'return false'}">${letter}</a>`
            ).join('');
        }
        
        function jumpToLetter(letter) {
            const element = document.getElementById(`section-${letter}`);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        function applyFilters() {
            filteredCameras = allCameras.filter(camera => {
                // Search filter
                if (searchQuery) {
                    const searchableText = `${camera.fullName} ${camera.brand} ${camera.model} ${camera.tags.join(' ')}`.toLowerCase();
                    if (!searchableText.includes(searchQuery)) {
                        return false;
                    }
                }
                
                // Apply active filters
                for (const [filterType, selectedValues] of Object.entries(activeFilters)) {
                    if (!selectedValues || selectedValues.size === 0) continue;
                    
                    let match = false;
                    
                    if (filterType === 'category' && selectedValues.has(camera.category)) {
                        match = true;
                    } else if (filterType === 'brand' && selectedValues.has(camera.brand)) {
                        match = true;
                    } else {
                        for (const value of selectedValues) {
                            if (camera.tags.includes(value)) {
                                match = true;
                                break;
                            }
                        }
                    }
                    
                    if (!match) return false;
                }
                
                return true;
            });
            
            displayCameras();
            updateResultsCount();
            generateAlphabetJumps();
        }
        
        function displayCameras() {
            const container = document.getElementById('cameraList');
            
            if (filteredCameras.length === 0) {
                container.innerHTML = '<div class="no-results">No cameras found matching your criteria.</div>';
                return;
            }
            
            // Group cameras by first letter
            const grouped = {};
            filteredCameras.forEach(camera => {
                const firstLetter = camera.fullName[0].toUpperCase();
                const key = /[A-Z]/.test(firstLetter) ? firstLetter : '#';
                
                if (!grouped[key]) grouped[key] = [];
                grouped[key].push(camera);
            });
            
            // Generate HTML
            let html = '';
            const sortedKeys = Object.keys(grouped).sort((a, b) => {
                if (a === '#') return 1;
                if (b === '#') return -1;
                return a.localeCompare(b);
            });
            
            sortedKeys.forEach(letter => {
                html += `
                    <div class="alphabet-section" id="section-${letter}">
                        <div class="alphabet-header">${letter}</div>
                        <div class="camera-items">
                `;
                
                grouped[letter].forEach(camera => {
                    const cameraId = `camera-${camera.id}`;
                    
                    html += `
                        <div class="camera-item" id="${cameraId}">
                            <a href="/camera/${camera.id}" class="camera-link" style="display: contents;">
                                <div class="camera-info">
                                    <div class="camera-name">${camera.fullName}</div>
                                    <div class="camera-details">
                                        <span>${camera.category || 'Camera'}</span>
                                        <span>•</span>
                                        <span>${camera.releaseYear || 'N/A'}</span>
                                    </div>
                                </div>
                                <div class="camera-meta">
                                    <span class="camera-price">
                                        ${camera.price ? `$${camera.price.toLocaleString()}` : 'Price N/A'}
                                    </span>
                                    ${camera.manualUrl ? 
                                        '<span class="manual-indicator">📄 Manual</span>' : 
                                        ''}
                                </div>
                            </a>
                            <button class="show-tags-btn" onclick="toggleTags('${cameraId}')">
                                Tags (${camera.tags.length})
                            </button>
                            <div class="tags-popup">
                                <div class="tags-list">
                                    ${camera.tags.map(tag => 
                                        `<span class="tag-item">${tag}</span>`
                                    ).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function updateResultsCount() {
            const count = filteredCameras.length;
            const total = allCameras.length;
            document.getElementById('resultsCount').textContent = 
                count === total ? 
                `${count} cameras` : 
                `${count} of ${total} cameras`;
        }
        
        function toggleTags(cameraId) {
            const cameraItem = document.getElementById(cameraId);
            if (cameraItem) {
                cameraItem.classList.toggle('show-tags');
                
                document.querySelectorAll('.camera-item').forEach(item => {
                    if (item.id !== cameraId) {
                        item.classList.remove('show-tags');
                    }
                });
            }
            
            event.stopPropagation();
            event.preventDefault();
        }
        
        function performSearch() {
            // Search is already real-time, this is just for the search button
            applyFilters();
        }
    </script>
</body>
</html>
